<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Expense Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body class="bg-light">

<!-- Splash Screen -->
<div id="splash" class="d-flex justify-content-center align-items-center vh-100">
    <img src="assets/logo.png" alt="Logo" style="width:200px;">
</div>

<!-- Loading -->
<div id="loading" class="d-none d-flex justify-content-center align-items-center vh-100">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
</div>

<div class="container py-3 d-none" id="main-content">
    <h3 class="text-center mb-4">Expense Tracker</h3>

    <!-- Login -->
    <div id="login-section" class="d-flex justify-content-center align-items-center vh-100">
        <div class="card shadow p-4" style="width: 100%; max-width: 400px;">
            <h4 class="mb-3 text-center">Login</h4>
            <form id="login-form">
                <input type="text" id="login-emp-id" placeholder="Employee ID" class="form-control mb-2" required>
                <input type="password" id="login-password" placeholder="Password" class="form-control mb-2" required>
                <button type="submit" class="btn btn-primary w-100">Login</button>
            </form>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard-section" class="d-none">

        <!-- Admin -->
        <div id="admin-section" class="d-none">
            <h4 class="mt-3">Admin Dashboard</h4>
            <h5 class="mt-3">Create User</h5>
            <form id="create-user-form" class="mb-3">
                <input type="text" id="new-emp-id" placeholder="Employee ID" class="form-control mb-2" required>
                <input type="text" id="new-name" placeholder="Full Name" class="form-control mb-2" required>
                <input type="email" id="new-email" placeholder="Email" class="form-control mb-2" required>
                <input type="password" id="new-password" placeholder="Password" class="form-control mb-2" required>
                <select id="new-role" class="form-select mb-2" required>
                    <option value="employee">Employee</option>
                    <option value="tl">Team Leader</option>
                    <option value="approver">Approver</option>
                </select>
                <button type="submit" class="btn btn-success w-100">Create User</button>
            </form>

            <h5 class="mt-3">All Users</h5>
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-sm">
                    <thead class="table-dark">
                        <tr>
                            <th>Emp ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body"></tbody>
                </table>
            </div>

            <h5 class="mt-3">All Expenses</h5>
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-sm">
                    <thead class="table-dark">
                        <tr>
                            <th>Emp ID</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Type</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Place</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Credited</th>
                        </tr>
                    </thead>
                    <tbody id="admin-expenses-table-body"></tbody>
                </table>
            </div>
        </div>

        <!-- TL -->
        <div id="tl-section" class="d-none">
            <h4 class="mt-3">Team Leader Dashboard</h4>
            <h5 class="mt-3">Submit Expense</h5>
            <form id="expense-form" class="mb-3">
                <select id="expense-employee-id" class="form-select mb-2" required>
                    <option value="">Select Employee or Myself</option>
                </select>
                <select id="category" class="form-select mb-2" required>
                    <option value="">Select Category</option>
                    <option>SBI</option><option>Nissan</option><option>UCO Bank</option>
                    <option>Ecofy</option><option>Canara</option>
                </select>
                <select id="expenseType" class="form-select mb-2" required>
                    <option value="">Select Expense Type</option>
                    <option>Fuel</option><option>Food</option><option>Local Travel</option>
                    <option>Incidental</option><option>Advocate Fees</option>
                </select>
                <input type="date" id="fromDate" class="form-control mb-2" required>
                <input type="date" id="toDate" class="form-control mb-2" required>
                <input type="text" id="place" class="form-control mb-2" placeholder="Enter Place" required>
                <input type="text" id="remarks" class="form-control mb-2" placeholder="Enter Remarks">
                <input type="number" id="amount" class="form-control mb-2" placeholder="Enter Amount" required>
                <input type="file" id="receipt" class="form-control mb-2">
                <select id="approverSelect" class="form-select mb-2" required></select>
                <button type="submit" class="btn btn-primary w-100">Submit Expense</button>
            </form>

            <h5 class="mt-3">All My Submitted Expenses</h5>
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-sm">
                    <thead class="table-dark">
                        <tr>
                            <th>Emp ID</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Type</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Place</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="tl-expenses-table-body"></tbody>
                </table>
            </div>
        </div>

        <!-- Employee -->
        <div id="employee-section" class="d-none">
            <h4 class="mt-3">Employee Dashboard</h4>
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-sm">
                    <thead class="table-dark">
                        <tr>
                            <th>Category</th>
                            <th>Type</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Place</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="employee-expenses-table-body"></tbody>
                </table>
            </div>
        </div>

        <!-- Approver -->
        <div id="approver-section" class="d-none">
            <h4 class="mt-3">Approver Dashboard</h4>
            <div class="table-responsive">
                <table class="table table-bordered table-striped table-sm">
                    <thead class="table-dark">
                        <tr>
                            <th>Emp ID</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Type</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Place</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="approver-expenses-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script type="module" src="app.js"></script>
</body>
</html>
